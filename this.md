# ðŸ’¡Â this

> this ì´ê²ƒ - JavaScriptì—ì„œÂ **`this`**Â í‚¤ì›Œë“œëŠ” ë‹¤ë¥¸ ì–¸ì–´ì™€ ì¡°ê¸ˆ ë‹¤ë¥´ê²Œ ë™ìž‘í•œë‹¤.

- `this`ëŠ” ì•žìœ¼ë¡œ ë§Œë“¤ì–´ì§ˆ ì¸ìŠ¤í„´ìŠ¤ë‚˜ ì§€ê¸ˆì˜ ê°ì²´ ìžê¸° ìžì‹ ì„ ê°€ë¦¬í‚¤ëŠ” **_ìžê¸° ì°¸ì¡° ë³€ìˆ˜(self-referencing variable)ì´ë‹¤._**
- JavaScriptì—ì„œëŠ” ë¬¸ë§¥ì— ë”°ë¼ this ì´ê²ƒì´ ê°€ë¦¬í‚¤ëŠ” ê²ƒì´ ë‹¬ë¼ì§„ë‹¤.

# ðŸ”†Â this ë°”ì¸ë”©

> this ë°”ì¸ë”©ì€ this(í‚¤ì›Œë“œì´ì§€ë§Œ ì‹ë³„ìž ì—­í• ì„ í•¨)ì™€ thisë¥¼ ê°€ë¦¬í‚¬ ê°ì²´ë¥¼ ë°”ì¸ë”©í•˜ëŠ” ê²ƒì´ë‹¤.

- ë°”ì¸ë”©ì´ëž€ ì‹ë³„ìž(ë³€ìˆ˜)ì™€ ê°’ì„ ì—°ê²°í•˜ëŠ” ê³¼ì •ì´ë‹¤.
- thisë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë‚˜ ìžì‹ ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” ê²ƒ, íŠ¹ì •í•œ ê°ì²´ì™€ ì´ thisë¥¼ ë¬¶ì–´ë‘ëŠ” ê²ƒ ë“±ì´ this ë°”ì¸ë”©ì´ë‹¤.
- Java, C#,C++ ë“±ì—ì„œëŠ” this ë°”ì¸ë”©ì´ ì •ì ìœ¼ë¡œ ê²°ì •ëœë‹¤. ì¦‰ í•œ ë²ˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” thisê°€ ê²°ì •ì´ ë˜ë©´ ê³„ì† ê·¸ ì¸ìŠ¤í„´ìŠ¤ë§Œ ì •ì ìœ¼ë¡œ ê°€ë¦¬í‚¨ë‹¤.
- JavaScript, typeScriptì—ì„œ thisëŠ” ëŸ°íƒ€ìž„ ìƒì—ì„œ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ë”°ë¼ ë™ì ìœ¼ë¡œ this ë°”ì¸ë”©ì´ ê²°ì •ëœë‹¤. ë”°ë¼ì„œ ê°œë°œìžê°€ ì˜ˆìƒì¹˜ ëª»í•œëŒ€ë¡œ ì½”ë“œê°€ í˜ëŸ¬ê°ˆ ìˆ˜ ìžˆë‹¤.

# ðŸ”† ë¬¸ë§¥ì—ì„œì˜ this

- ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸(global, function ë˜ëŠ” eval)ì˜ í”„ë¡œí¼í‹°ëŠ” ëŠìŠ¨í•œ ëª¨ë“œì—ì„œ í•­ìƒ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ë©°, ì—„ê²© ëª¨ë“œì—ì„œëŠ” ì–´ë– í•œ ê°’ì´ë“  ë  ìˆ˜ ìžˆë‹¤.

## ðŸÂ ì „ì—­ ë¬¸ë§¥

- ì „ì—­ ë¬¸ë§¥ì—ì„œ `this`ëŠ” ì—„ê²© ëª¨ë“œ ì—¬ë¶€ì— ê´€ê³„ ì—†ì´ ì „ì—­ ê°ì²´ë¥¼ ì°¸ì¡°í•œë‹¤.
- ê¸€ë¡œë²Œ ì»¨í…ìŠ¤íŠ¸ì˜ this

  - ë¸Œë¼ìš°ì €: window
    ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/47922ee1-a75e-4dc3-ba96-8fa80767047f/9f2fa4e2-ab13-4be6-bd6f-492400056670/Untitled.png)
  - ë…¸ë“œ : ëª¨ë“ˆ

  ```tsx
  console.log(this); // {}

  const a = 0;
  module.exports.a = a;
  console.log(this); // { a: 0 }
  console.log(globalThis); //ì „ì—­ ê°ì²´
  ```

## ðŸŽÂ í•¨ìˆ˜ ë¬¸ë§¥

- í•¨ìˆ˜ì—ì„œì˜ thisëŠ” í•¨ìˆ˜ í˜¸ì¶œí•˜ëŠ” callerì— ë”°ë¼ ê²°ì •ëœë‹¤.

### ðŸª€Â ë‹¨ìˆœ í˜¸ì¶œ

> ì „ì—­ í•¨ìˆ˜, ì¤‘ì²© í•¨ìˆ˜(nested function)ë¥¼ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì˜ thisì—ëŠ” **ì „ì—­ ê°ì²´**ê°€ ë°”ì¸ë”©ëœë‹¤.

- ëŠìŠ¨í•œ ëª¨ë“œì—ì„œëŠ” `globalThis`

```jsx
function f1() {
  return this;
}

// ë¸Œë¼ìš°ì €
f1() === window; // true

// Node.js
f1() === globalThis; // true
```

- ì—„ê²© ëª¨ë“œì—ì„œëŠ” `undefined` â†’ í•¨ìˆ˜ ë‚´ë¶€ ìŠ¤ì½”í”„ ì•ˆì— this ì •ë³´ê°€ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.

```jsx
'use strict';

function f2() {
  return this;
}

f2() === undefined; // true
```

### ðŸª€ ìƒì„±ìžë¡œì„œì˜ this

- ìƒì„±ìž í•¨ìˆ˜ë‚˜ í´ëž˜ìŠ¤ì—ì„œì˜ thisëŠ” ì•žìœ¼ë¡œ **ìƒì„±ë  ì¸ìŠ¤í„´ìŠ¤ ìžì²´**ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

```jsx
function Cat(name) {
  this.name = name;
  this.printName = function () {
    console.log(this.name);
  };
}
const cat1 = new Cat('ë‚˜ë¹„');
const cat2 = new Cat('ì¶˜ë°°');
cat1.printName(); // ë‚˜ë¹„
cat2.printName(); // ì¶˜ë°°
```

### ðŸª€ ê°ì²´ì˜ ë©”ì„œë“œë¡œì„œ

> í•¨ìˆ˜ë¥¼ ì–´ë–¤ ê°ì²´ì˜ ë©”ì„œë“œë¡œ í˜¸ì¶œí•˜ë©´Â `this`ì˜ ê°’ì€ ê·¸ ê°ì²´ë¥¼ ì‚¬ìš©í•œë‹¤.

- ë©”ì„œë“œ ë‚´ë¶€ì˜ thisëŠ” **ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´**, ì¦‰ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ë©”ì„œë“œ ì´ë¦„ ì•žì˜ ë§ˆì¹¨í‘œ(.) ì—°ì‚°ìž ì•žì— ê¸°ìˆ í•œ ê°ì²´ê°€ ë°”ì¸ë”©ëœë‹¤.

```java
const person = {
  name: "Kim",
  getName() {
    // ë©”ì„œë“œ ë‚´ë¶€ì˜ thisëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ì— ë°”ì¸ë”©
    return this.name;
  },
};

// ë©”ì„œë“œ getNameì„ í˜¸ì¶œí•œ ê°ì²´ëŠ” person
console.log(person.getName()); // Kim
```

## ðŸ”“Â ë™ì  ë°”ì¸ë”©

- JavaScriptëŠ” ëˆ„ê°€ **í˜¸ì¶œ**í•˜ëƒì— ë”°ë¼ thisê°€ ë‹¬ë¼ì§€ëŠ” **dynamic binding**ì´ë‹¤.
- í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ìƒí™© 4ê°€ì§€
  - í•¨ìˆ˜ í˜¸ì¶œ : í•¨ìˆ˜ ì§ì ‘ í˜¸ì¶œ
  - ë©”ì„œë“œ í˜¸ì¶œ : ê°ì²´ì˜ ë©”ì„œë“œ í˜¸ì¶œ
  - ìƒì„±ìž í˜¸ì¶œ : ìƒì„±ìž í•¨ìˆ˜ë¥¼í˜¸ì¶œ
  - ê°„ì ‘ í˜¸ì¶œ : call, apply ë“±ìœ¼ë¡œ í•¨ìˆ˜ ê°„ì ‘ í˜¸ì¶œ
- **í˜¸ì¶œ í™˜ê²½ì— ë”°ë¼ thisëŠ” ë™ì ìœ¼ë¡œ ì„¸íŒ… â†’ ë™ì  ë°”ì¸ë”©(dynamic binding)**
- bind, apply, call ë“±ìœ¼ë¡œ thisê°€ ê°€ë¦¬í‚¤ëŠ” ê²ƒì„ ì¡°ìž‘í•  ìˆ˜ ìžˆë‹¤.

## ðŸ”’ this ê³ ì •í•˜ê¸°

- javaScriptì—ì„œ this ë°”ì¸ë”©ì„ ê³ ì •í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

### ðŸ“ŒÂ \***\*apply, call, bind ë©”ì„œë“œ\*\***

- thisë¥¼ íŠ¹ì • ê°ì²´ì— ëª…ì‹œì ìœ¼ë¡œ ë°”ì¸ë”©í•˜ëŠ” ë°©ë²•!

**bind ë©”ì„œë“œ**

- bind í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ìˆ˜ë™ì ìœ¼ë¡œ ë°”ì¸ë”© í•´ì¤„ ìˆ˜ ìžˆë‹¤.

```jsx
function f() {
  return this.a;
}

let g = f.bind({ a: 'azerty' });
console.log(g()); // azerty

let h = g.bind({ a: 'yoo' }); // bindëŠ” í•œ ë²ˆë§Œ ë™ìž‘í•¨!
console.log(h()); // azerty

let o = { a: 37, f: f, g: g, h: h };
console.log(o.a, o.f(), o.g(), o.h()); // 37, 37, azerty, azerty
```

**apply, call ë©”ì„œë“œ**

- **call** ë©”ì„œë“œëŠ”Â **ì¸ìˆ˜ ëª©ë¡ì„ ë°›ê³ **, **apply** ë©”ì„œë“œëŠ”Â **ì¸ìˆ˜ ë°°ì—´ì„ í•˜ë‚˜** ë°›ëŠ”ë‹¤**.**
  `ex) call(this, var1, var2, var3, â€¦) / apply(this, [ el, el2, el3, â€¦ ])`

### ðŸ“ŒÂ í™”ì‚´í‘œ í•¨ìˆ˜

> í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” ìƒì„± ì‹œì ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì—ì„œì˜ thisë¥¼ ê¸°ì–µí•˜ê³  ê³ ì •í•œë‹¤. ì¦‰, ì •ì  ë°”ì¸ë”©ëœë‹¤.

- í™”ì‚´í‘œ í•¨ìˆ˜ì—ì„œ `this`ëŠ” ìžì‹ ì„ ê°ì‹¼ ì •ì  ë²”ìœ„!
- call, bind, applyë¥¼ ì‚¬ìš©í•´ë„ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤.
- ì „ì—­ ì½”ë“œì—ì„œ í™”ì‚´í‘œ í•¨ìˆ˜ this â†’ ìžì‹ ì„ ê°ì‹¼ ì „ì—­ ê°ì²´

```jsx
let globalObject = this;
let foo = () => this;
console.log(foo() === globalObject); // true
```

- í™”ì‚´í‘œ í•¨ìˆ˜ ë°–ì—ì„œ ì œì¼ ê·¼ì ‘í•œ ìŠ¤ì½”í”„ë¥¼ thisê°€ ê°€ë¦¬í‚¨ë‹¤.

```
const obj = {
  method() {
    console.log('context : ', this); // obj
    let f1 = function () {
      console.log('[f1] this : ', this);
    };
    let f2 = () => console.log('[f2] this : ', this);
    **f1(); // global**
    **f2(); // obj -> thisëŠ” ê°€ìž¥ ê·¼ì ‘í•œ ìŠ¤ì½”í”„ obj ê°€ë¦¬í‚´**
  },
};
o.method();
```

- f1() ì‹¤í–‰ ì‹œ ìƒˆë¡œìš´ ì»¨í…ìŠ¤íŠ¸ ìƒì„± â†’ f1ì— ë°”ì¸ë”©ëœ ì»¨í…ìŠ¤íŠ¸ ì—†ë‹¤ â†’ thisëŠ” global ê°€ë¦¬í‚´
- f2()ëŠ” í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ ìƒì„± â†’ this ë³€ìˆ˜ëŠ” ë¶€ëª¨ì˜ ì»¨í…ìŠ¤íŠ¸ ê°€ë¦¬í‚´ â†’ thisëŠ” oê°€ ë¨

## ðŸ”¥Â ì •ë¦¬

- thisëŠ” ì•žìœ¼ë¡œ ìƒì„±ë  ì¸ìŠ¤í„´ìŠ¤ë‚˜ ì§€ê¸ˆì˜ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ìžê¸° ì°¸ì¡° ë³€ìˆ˜ë‹¤.
- ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ thisëŠ” ë™ì ìœ¼ë¡œ ë°”ì¸ë”©ë˜ëŠ”ë°, í˜¸ì¶œí•œ callerì— ë”°ë¼ ê²°ì •ëœë‹¤.
- ë‹¨ìˆœ í˜¸ì¶œì‹œì—ëŠ” ì „ì—­ ê°ì²´
- ìƒì„±ìž í•¨ìˆ˜ë‚˜ í´ëž˜ìŠ¤ì—ì„œëŠ” ì•žìœ¼ë¡œ ìƒì„±ë  ì¸ìŠ¤í„´ìŠ¤
- ê°ì²´ì˜ ë©”ì„œë“œë¡œì„œëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´, ì¦‰ . ì•žì˜ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
- thisë¥¼ ì •ì ìœ¼ë¡œ ê³ ì •í•˜ê¸° ìœ„í•´ì„œëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, bind(), call(), apply() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.

## ðŸ’¦Â setTimeout()

> ì§€ì •í•œ ì‹œê°„ í›„ í•¨ìˆ˜ë‚˜ ì§€ì •í•œ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” íƒ€ì´ë¨¸ë¥¼ ì„¤ì •í•˜ëŠ” ë¹„ë™ê¸° ë©”ì„œë“œ

- setTimoutì—ì„œ thisëŠ” í•­ìƒ ì „ì—­ ê°ì²´(window)ë¥¼ this ë°”ì¸ë”© í•œë‹¤.
- **ê·¸ ì´ìœ ëŠ” setTimeoutì´ ì‹¤í–‰ë˜ëŠ” ì½”ë“œëŠ” setTimeoutì„ í˜¸ì¶œí–ˆë˜ ê³³ê³¼ëŠ” ë‹¤ë¥¸ ì‹¤í–‰ ì»¨í…ìŠ¤í¬(ë¸Œë¼ìš°ì €)ì—ì„œ í˜¸ì¶œë˜ê¸° ë•Œë¬¸ì´ë‹¤.**
- í˜¸ì¶œ í•¨ìˆ˜ì˜ this í‚¤ì›Œë“œ ê°’ì„ ì„¤ì •í•˜ëŠ” ì¼ë°˜ì ì¸ ê·œì¹™(ê°ì²´ì˜ ë©”ì„œë“œë¡œì„œ! - thisëŠ” . ì•žì˜ ê°ì²´ë¥¼ ê°€ë¦¬í‚´)ì´Â ì—¬ê¸°ì„œë„ ì ìš©ë˜ë©°, thisë¥¼ í˜¸ì¶œ ì‹œ ì§€ì •í•˜ì§€ ì•Šê³ , bindë¥¼ ë°”ì¸ë”©ì„ í•˜ì§€ ì•ŠëŠ” ê²½ìš°Â **window**ë¥¼ ê°€ë¦¬í‚¤ê²Œ ëœë‹¤.

```jsx
const myArray = ['zero', 'one', 'two'];

myArray.myMethod = function (sProperty) {
  // this[sProperty]ê°€ myArray[sProperty]ì™€ ë™ì¼í•¨ í™•ì¸
  console.log(arguments.length > 0 ? this[sProperty] : this);
};

// ì—¬ê¸°ì„œ thisëŠ” myArray
myArray.myMethod(); // [ 'zero', 'one', 'two', myMethod: [Function (anonymous)] ]
myArray.myMethod(1); // one
```

- setTimeoutì„ ì‚¬ìš©í•´ì„œ í˜¸ì¶œí•´ë³´ë©´

```jsx
// íƒ€ì´ë¨¸ ì™„ë£Œ í›„ í˜¸ì¶œ ì‹œì ì— thisê°€ ë”°ë¡œ ì„¤ì •ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ -> window
setTimeout(myArray.myMethod, 1.0 * 1000); // 1ì´ˆ í›„, window
setTimeout(myArray.myMethod, 1.5 * 1000, '1'); //1.5ì´ˆ í›„, undefined
```

- íƒ€ì´ë¨¸ ì™„ë£Œ í›„ í˜¸ì¶œ ì‹œì ì—ì„œ thisê°€ ë”°ë¡œ ì„¤ì •ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— thisëŠ” windowë¥¼ ê°€ë¦¬í‚¨ë‹¤.
- ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ í•¨ìˆ˜(í™”ì‚´í‘œ í•¨ìˆ˜, ìµëª…í•¨ìˆ˜ ë“±)ë¥¼ ê°ì‹¸ì„œ í•´ê²°í•  ìˆ˜ ìžˆê³ , bindë¡œ this ê°’ì„ ì„¤ì •í•  ìˆ˜ë„ ìžˆë‹¤.

```jsx
// ðŸ’¡ í•´ê²°ë²•
// 1. í•¨ìˆ˜ ê°ì‹¸ê¸°
setTimeout(function () {
  myArray.myMethod();
}, 2.0 * 1000); // [ 'zero', 'one', 'two', myMethod: [Function (anonymous)] ]
setTimeout(function () {
  myArray.myMethod('1');
}, 2.5 * 1000); // one

// 2. í™”ì‚´í‘œ í•¨ìˆ˜
setTimeout(() => {
  myArray.myMethod();
}, 2.0 * 1000); // [ 'zero', 'one', 'two', myMethod: [Function (anonymous)] ]
setTimeout(() => {
  myArray.myMethod('1');
}, 2.5 * 1000); // "one"

// 3. bind
const myBoundMethod = function (sProperty) {
  console.log(arguments.length > 0 ? this[sProperty] : this);
}.bind(myArray);

myBoundMethod(); //  [ 'zero', 'one', 'two', myMethod: [Function (anonymous)] ]
myBoundMethod(1); // one
setTimeout(myBoundMethod, 1.0 * 1000); // [ 'zero', 'one', 'two', myMethod: [Function (anonymous)] ]
setTimeout(myBoundMethod, 1.5 * 1000, '1'); // one
```
